import{C as O,r as x,j as e,B as p,T as s,P as E,I as v,b as c}from"./index-z0K9aNkG.js";import{a as F,b as G,c as I,d as T,T as r,e as W}from"./TableRow-C2GgRgt6.js";import{f as m}from"./index-BtJa5afQ.js";import{C as k}from"./Chip-CcJxQYY9.js";import{T as C}from"./Tooltip-BsEfAnXD.js";import{E as q}from"./Edit-C50tj2DT.js";import{V as M}from"./Visibility-vmrErCtT.js";import{D as H}from"./Delete-gogUZDZ4.js";import{D as b,a as B}from"./DialogContent-DPXOk6da.js";import{D as S}from"./DialogTitle-DdgnUGFV.js";import{G as n}from"./Grid-CyhzX6jj.js";import{D as P}from"./DialogActions-MulIAK1Y.js";import{T as U}from"./TextField-B85Xz2xy.js";import"./useId-CEkL0nOO.js";import"./Popper-D1MirRZx.js";const J=({open:f,booking:a,onClose:u,onSubmit:i})=>{const[l,h]=x.useState(""),o=d=>{i(d,l),h("")};return e.jsxs(b,{open:f,onClose:u,maxWidth:"sm",fullWidth:!0,children:[e.jsx(S,{children:"Respond to Booking Request"}),e.jsx(B,{children:a&&e.jsxs(p,{sx:{mt:2},children:[e.jsxs(s,{variant:"subtitle1",gutterBottom:!0,children:["Visitor: ",a.visitorName]}),e.jsxs(s,{variant:"body2",gutterBottom:!0,children:["Date: ",m(new Date(a.visitDate),"PPP p")]}),e.jsxs(s,{variant:"body2",gutterBottom:!0,children:["Group Size: ",a.groupSize," people"]}),e.jsxs(s,{variant:"body2",gutterBottom:!0,children:["Purpose: ",a.purpose]}),e.jsx(U,{fullWidth:!0,label:"Feedback",multiline:!0,rows:4,value:l,onChange:d=>h(d.target.value),sx:{mt:2}})]})}),e.jsxs(P,{children:[e.jsx(c,{onClick:u,children:"Cancel"}),e.jsx(c,{onClick:()=>o("rejected"),color:"error",variant:"contained",children:"Reject"}),e.jsx(c,{onClick:()=>o("approved"),color:"primary",variant:"contained",children:"Approve"})]})]})},ae=()=>{const{getAllBookings:f,updateBookingStatus:a,deleteBooking:u}=O(),[i,l]=x.useState(null),[h,o]=x.useState(!1),[d,j]=x.useState(!1),[w,D]=x.useState(!1),y=f(),z=t=>{u(t),j(!1),l(null)},V=t=>{l(t),D(!0)},R=async(t,g)=>{i&&(await a(i.id,t,g),D(!1),l(null))},N=t=>{const g={pending:{color:"warning",label:"Pending"},approved:{color:"success",label:"Approved"},rejected:{color:"error",label:"Rejected"}};return e.jsx(k,{...g[t],size:"small"})},A=t=>{switch(t){case"approved":return"success";case"rejected":return"error";default:return"warning"}};return e.jsxs(p,{sx:{p:3},children:[e.jsx(s,{variant:"h4",gutterBottom:!0,children:"Booking Management"}),e.jsx(F,{component:E,children:e.jsxs(G,{children:[e.jsx(I,{children:e.jsxs(T,{children:[e.jsx(r,{children:"Visitor Name"}),e.jsx(r,{children:"Visit Date"}),e.jsx(r,{children:"Group Size"}),e.jsx(r,{children:"Purpose"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(W,{children:y.map(t=>e.jsxs(T,{children:[e.jsx(r,{children:t.visitorName}),e.jsx(r,{children:m(new Date(t.visitDate),"PPP p")}),e.jsx(r,{children:t.groupSize}),e.jsx(r,{children:t.purpose}),e.jsx(r,{children:e.jsx(k,{label:t.status.toUpperCase(),color:A(t.status),size:"small"})}),e.jsx(r,{children:e.jsxs(p,{sx:{display:"flex",gap:1},children:[t.status==="pending"&&e.jsx(C,{title:"Respond",children:e.jsx(v,{size:"small",color:"primary",onClick:()=>V(t),children:e.jsx(q,{})})}),e.jsx(C,{title:"View Details",children:e.jsx(v,{size:"small",color:"info",onClick:()=>{l(t),o(!0)},children:e.jsx(M,{})})}),e.jsx(C,{title:"Delete",children:e.jsx(v,{size:"small",color:"error",onClick:()=>{l(t),j(!0)},children:e.jsx(H,{})})})]})})]},t.id))})]})}),e.jsxs(b,{open:h,onClose:()=>o(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(S,{children:"Booking Details"}),e.jsx(B,{children:i&&e.jsxs(n,{container:!0,spacing:2,sx:{mt:1},children:[e.jsxs(n,{item:!0,xs:12,children:[e.jsx(s,{variant:"subtitle2",children:"Visitor Name"}),e.jsx(s,{children:i.visitorName})]}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(s,{variant:"subtitle2",children:"Email"}),e.jsx(s,{children:i.email})]}),e.jsxs(n,{item:!0,xs:12,sm:6,children:[e.jsx(s,{variant:"subtitle2",children:"Visit Date"}),e.jsx(s,{children:m(new Date(i.visitDate),"PPP p")})]}),e.jsxs(n,{item:!0,xs:12,sm:6,children:[e.jsx(s,{variant:"subtitle2",children:"Group Size"}),e.jsx(s,{children:i.groupSize})]}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(s,{variant:"subtitle2",children:"Purpose of Visit"}),e.jsx(s,{children:i.purpose})]}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(s,{variant:"subtitle2",children:"Special Requirements"}),e.jsx(s,{children:i.specialRequirements||"None specified"})]}),e.jsxs(n,{item:!0,xs:12,children:[e.jsx(s,{variant:"subtitle2",children:"Status"}),N(i.status)]})]})}),e.jsx(P,{children:e.jsx(c,{onClick:()=>o(!1),children:"Close"})})]}),e.jsxs(b,{open:d,onClose:()=>j(!1),children:[e.jsx(S,{children:"Confirm Delete"}),e.jsxs(B,{children:[e.jsx(s,{children:"Are you sure you want to delete this booking? This action cannot be undone."}),i&&e.jsxs(p,{sx:{mt:2},children:[e.jsx(s,{variant:"subtitle2",children:"Booking Details:"}),e.jsxs(s,{children:["Visitor: ",i.visitorName]}),e.jsxs(s,{children:["Date: ",m(new Date(i.visitDate),"PPP p")]}),e.jsxs(s,{children:["Purpose: ",i.purpose]})]})]}),e.jsxs(P,{children:[e.jsx(c,{onClick:()=>j(!1),children:"Cancel"}),e.jsx(c,{onClick:()=>i&&z(i.id),color:"error",variant:"contained",children:"Delete"})]})]}),e.jsx(J,{open:w,booking:i,onClose:()=>{D(!1),l(null)},onSubmit:R})]})};export{ae as default};
