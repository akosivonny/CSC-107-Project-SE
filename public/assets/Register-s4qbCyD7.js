import{u as w,a as j,c as b,r as l,j as r,B as i,P as y,T as d,b as P,L as C}from"./index-z0K9aNkG.js";import{C as S}from"./Container-BImiuYkV.js";import{A as u,S as A}from"./Snackbar-BH0trEap.js";import{T as n,F as W,I as R,S as F}from"./TextField-B85Xz2xy.js";import{M as c}from"./MenuItem-FM9UZ6zV.js";import{L as T}from"./Link-sF26ZLWk.js";import"./useThemeProps-DBuWnIrX.js";import"./useSlot-XS7t6U-k.js";import"./useId-CEkL0nOO.js";import"./dividerClasses-KJHE8iFI.js";const z=()=>{const h=w(),{register:p}=j(),{addUser:x}=b(),[e,s]=l.useState({name:"",email:"",password:"",confirmPassword:"",role:"",phone:"",address:""}),[t,o]=l.useState(""),[f,m]=l.useState(!1),g=()=>!e.name||!e.email||!e.password||!e.confirmPassword||!e.role?(o("Please fill in all fields"),!1):e.email.includes("@")?e.password.length<6?(o("Password must be at least 6 characters long"),!1):e.password!==e.confirmPassword?(o("Passwords do not match"),!1):!0:(o("Please enter a valid email address"),!1),v=async a=>{if(a.preventDefault(),o(""),!!g())try{await p(e),x({name:e.name,email:e.email,role:e.role,phone:e.phone,address:e.address}),m(!0),setTimeout(()=>{h("/login")},1500)}catch{o("Registration failed. Please try again.")}};return r.jsxs(S,{component:"main",maxWidth:"xs",children:[r.jsx(i,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:r.jsxs(y,{elevation:3,sx:{p:4,width:"100%"},children:[r.jsx(d,{component:"h1",variant:"h5",align:"center",gutterBottom:!0,children:"Create Account"}),t&&r.jsx(u,{severity:"error",sx:{mb:2},children:t}),r.jsxs(i,{component:"form",onSubmit:v,sx:{mt:1},children:[r.jsx(n,{margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Full Name",name:"name",autoComplete:"name",autoFocus:!0,value:e.name,onChange:a=>s({...e,name:a.target.value}),error:!!t&&!e.name}),r.jsx(n,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:e.email,onChange:a=>s({...e,email:a.target.value}),error:!!t&&!e.email}),r.jsxs(W,{fullWidth:!0,margin:"normal",children:[r.jsx(R,{id:"role-label",children:"Role"}),r.jsxs(F,{labelId:"role-label",id:"role",value:e.role,label:"Role",onChange:a=>s({...e,role:a.target.value}),children:[r.jsx(c,{value:"student",children:"Student"}),r.jsx(c,{value:"visitor",children:"Visitor"})]})]}),r.jsx(n,{margin:"normal",fullWidth:!0,id:"phone",label:"Phone Number (Optional)",name:"phone",value:e.phone,onChange:a=>s({...e,phone:a.target.value})}),r.jsx(n,{margin:"normal",fullWidth:!0,id:"address",label:"Address (Optional)",name:"address",multiline:!0,rows:2,value:e.address,onChange:a=>s({...e,address:a.target.value})}),r.jsx(d,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"Note: Admin accounts are managed by system administrators only."}),r.jsx(n,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:e.password,onChange:a=>s({...e,password:a.target.value}),error:!!t&&!e.password}),r.jsx(n,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",value:e.confirmPassword,onChange:a=>s({...e,confirmPassword:a.target.value}),error:!!t&&!e.confirmPassword}),r.jsx(P,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Register"}),r.jsx(i,{sx:{textAlign:"center"},children:r.jsxs(d,{variant:"body2",color:"text.secondary",children:["Already have an account?"," ",r.jsx(T,{component:C,to:"/login",variant:"body2",children:"Sign in here"})]})})]})]})}),r.jsx(A,{open:f,autoHideDuration:3e3,onClose:()=>m(!1),anchorOrigin:{vertical:"top",horizontal:"center"},children:r.jsx(u,{severity:"success",sx:{width:"100%"},children:"Registration successful! Redirecting to login..."})})]})};export{z as default};
