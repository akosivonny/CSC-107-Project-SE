import{d as G,g as _,r as x,h as V,Z as Pe,a9 as we,_ as J,l as m,a1 as Ie,aa as Me,k as $e,j as e,s as I,m as H,o as X,ab as de,q as be,ac as Fe,n as je,a as Te,z as ze,v as Ae,B as w,T as c,b as Q,P as pe}from"./index-ChLGGPnB.js";import{G as y}from"./Grid-KMxruX-y.js";import{C as De,a as Be}from"./CardContent-CI-Jq7jG.js";import{C as We}from"./CardMedia-CNd7ajiN.js";import{C as ue}from"./Chip-CPpXuheC.js";import{T as ke}from"./Tooltip-DkoEVcvy.js";import{D as Oe,a as Ue}from"./DialogContent-B0nUtc07.js";import{D as qe}from"./DialogTitle-BG-6kbBZ.js";import{T as k,F as He,I as Ye,S as Ge,b as _e}from"./TextField-B5PNJU4g.js";import{M as me}from"./MenuItem-DKBsQ_BZ.js";import{D as he}from"./Divider-CoXMxGjM.js";import{S as Ve,A as Je}from"./Snackbar-CFT1ACio.js";import"./useId-D090OfHX.js";import"./Popper-C9UGyYFP.js";import"./dividerClasses-OPpZWiEp.js";import"./useSlot-DSXKQtnu.js";function Xe(t){return G("MuiCollapse",t)}_("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Ze=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Ke=t=>{const{orientation:n,classes:a}=t,d={root:["root",`${n}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${n}`],wrapperInner:["wrapperInner",`${n}`]};return X(d,Xe,a)},Qe=I("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.orientation],a.state==="entered"&&n.entered,a.state==="exited"&&!a.in&&a.collapsedSize==="0px"&&n.hidden]}})(({theme:t,ownerState:n})=>m({height:0,overflow:"hidden",transition:t.transitions.create("height")},n.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},n.state==="entered"&&m({height:"auto",overflow:"visible"},n.orientation==="horizontal"&&{width:"auto"}),n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&{visibility:"hidden"})),et=I("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,n)=>n.wrapper})(({ownerState:t})=>m({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),tt=I("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,n)=>n.wrapperInner})(({ownerState:t})=>m({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),le=x.forwardRef(function(n,a){const d=V({props:n,name:"MuiCollapse"}),{addEndListener:p,children:s,className:b,collapsedSize:o="0px",component:u,easing:C,in:g,onEnter:l,onEntered:S,onEntering:N,onExit:j,onExited:R,onExiting:E,orientation:h="vertical",style:M,timeout:L=we.standard,TransitionComponent:B=Pe}=d,F=J(d,Ze),$=m({},d,{orientation:h,collapsedSize:o}),P=Ke($),A=Ie(),W=Me(),O=x.useRef(null),Z=x.useRef(),Y=typeof o=="number"?`${o}px`:o,r=h==="horizontal",i=r?"width":"height",f=x.useRef(null),T=$e(a,f),D=v=>z=>{if(v){const U=f.current;z===void 0?v(U):v(U,z)}},ne=()=>O.current?O.current[r?"clientWidth":"clientHeight"]:0,ye=D((v,z)=>{O.current&&r&&(O.current.style.position="absolute"),v.style[i]=Y,l&&l(v,z)}),Ce=D((v,z)=>{const U=ne();O.current&&r&&(O.current.style.position="");const{duration:K,easing:te}=de({style:M,timeout:L,easing:C},{mode:"enter"});if(L==="auto"){const ce=A.transitions.getAutoHeightDuration(U);v.style.transitionDuration=`${ce}ms`,Z.current=ce}else v.style.transitionDuration=typeof K=="string"?K:`${K}ms`;v.style[i]=`${U}px`,v.style.transitionTimingFunction=te,N&&N(v,z)}),Se=D((v,z)=>{v.style[i]="auto",S&&S(v,z)}),Le=D(v=>{v.style[i]=`${ne()}px`,j&&j(v)}),Ne=D(R),Re=D(v=>{const z=ne(),{duration:U,easing:K}=de({style:M,timeout:L,easing:C},{mode:"exit"});if(L==="auto"){const te=A.transitions.getAutoHeightDuration(z);v.style.transitionDuration=`${te}ms`,Z.current=te}else v.style.transitionDuration=typeof U=="string"?U:`${U}ms`;v.style[i]=Y,v.style.transitionTimingFunction=K,E&&E(v)}),Ee=v=>{L==="auto"&&W.start(Z.current||0,v),p&&p(f.current,v)};return e.jsx(B,m({in:g,onEnter:ye,onEntered:Se,onEntering:Ce,onExit:Le,onExited:Ne,onExiting:Re,addEndListener:Ee,nodeRef:f,timeout:L==="auto"?null:L},F,{children:(v,z)=>e.jsx(Qe,m({as:u,className:H(P.root,b,{entered:P.entered,exited:!g&&Y==="0px"&&P.hidden}[v]),style:m({[r?"minWidth":"minHeight"]:Y},M),ref:T},z,{ownerState:m({},$,{state:v}),children:e.jsx(et,{ownerState:m({},$,{state:v}),className:P.wrapper,ref:O,children:e.jsx(tt,{ownerState:m({},$,{state:v}),className:P.wrapperInner,children:s})})}))}))});le.muiSupportAuto=!0;const ee=x.createContext({}),re=x.createContext({});function rt(t){return G("MuiStep",t)}_("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const nt=["active","children","className","component","completed","disabled","expanded","index","last"],ot=t=>{const{classes:n,orientation:a,alternativeLabel:d,completed:p}=t;return X({root:["root",a,d&&"alternativeLabel",p&&"completed"]},rt,n)},at=I("div",{name:"MuiStep",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.orientation],a.alternativeLabel&&n.alternativeLabel,a.completed&&n.completed]}})(({ownerState:t})=>m({},t.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},t.alternativeLabel&&{flex:1,position:"relative"})),xe=x.forwardRef(function(n,a){const d=V({props:n,name:"MuiStep"}),{active:p,children:s,className:b,component:o="div",completed:u,disabled:C,expanded:g=!1,index:l,last:S}=d,N=J(d,nt),{activeStep:j,connector:R,alternativeLabel:E,orientation:h,nonLinear:M}=x.useContext(ee);let[L=!1,B=!1,F=!1]=[p,u,C];j===l?L=p!==void 0?p:!0:!M&&j>l?B=u!==void 0?u:!0:!M&&j<l&&(F=C!==void 0?C:!0);const $=x.useMemo(()=>({index:l,last:S,expanded:g,icon:l+1,active:L,completed:B,disabled:F}),[l,S,g,L,B,F]),P=m({},d,{active:L,orientation:h,alternativeLabel:E,completed:B,disabled:F,expanded:g,component:o}),A=ot(P),W=e.jsxs(at,m({as:o,className:H(A.root,b),ref:a,ownerState:P},N,{children:[R&&E&&l!==0?R:null,s]}));return e.jsx(re.Provider,{value:$,children:R&&!E&&l!==0?e.jsxs(x.Fragment,{children:[R,W]}):W})}),it=be(e.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),st=be(e.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function lt(t){return G("MuiStepIcon",t)}const oe=_("MuiStepIcon",["root","active","completed","error","text"]);var fe;const ct=["active","className","completed","error","icon"],dt=t=>{const{classes:n,active:a,completed:d,error:p}=t;return X({root:["root",a&&"active",d&&"completed",p&&"error"],text:["text"]},lt,n)},ae=I(Fe,{name:"MuiStepIcon",slot:"Root",overridesResolver:(t,n)=>n.root})(({theme:t})=>({display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled,[`&.${oe.completed}`]:{color:(t.vars||t).palette.primary.main},[`&.${oe.active}`]:{color:(t.vars||t).palette.primary.main},[`&.${oe.error}`]:{color:(t.vars||t).palette.error.main}})),pt=I("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(t,n)=>n.text})(({theme:t})=>({fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily})),ut=x.forwardRef(function(n,a){const d=V({props:n,name:"MuiStepIcon"}),{active:p=!1,className:s,completed:b=!1,error:o=!1,icon:u}=d,C=J(d,ct),g=m({},d,{active:p,completed:b,error:o}),l=dt(g);if(typeof u=="number"||typeof u=="string"){const S=H(s,l.root);return o?e.jsx(ae,m({as:st,className:S,ref:a,ownerState:g},C)):b?e.jsx(ae,m({as:it,className:S,ref:a,ownerState:g},C)):e.jsxs(ae,m({className:S,ref:a,ownerState:g},C,{children:[fe||(fe=e.jsx("circle",{cx:"12",cy:"12",r:"12"})),e.jsx(pt,{className:l.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:g,children:u})]}))}return u});function mt(t){return G("MuiStepLabel",t)}const q=_("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),ht=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],xt=t=>{const{classes:n,orientation:a,active:d,completed:p,error:s,disabled:b,alternativeLabel:o}=t;return X({root:["root",a,s&&"error",b&&"disabled",o&&"alternativeLabel"],label:["label",d&&"active",p&&"completed",s&&"error",b&&"disabled",o&&"alternativeLabel"],iconContainer:["iconContainer",d&&"active",p&&"completed",s&&"error",b&&"disabled",o&&"alternativeLabel"],labelContainer:["labelContainer",o&&"alternativeLabel"]},mt,n)},ft=I("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.orientation]]}})(({ownerState:t})=>m({display:"flex",alignItems:"center",[`&.${q.alternativeLabel}`]:{flexDirection:"column"},[`&.${q.disabled}`]:{cursor:"default"}},t.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),vt=I("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(t,n)=>n.label})(({theme:t})=>m({},t.typography.body2,{display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),[`&.${q.active}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${q.completed}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${q.alternativeLabel}`]:{marginTop:16},[`&.${q.error}`]:{color:(t.vars||t).palette.error.main}})),gt=I("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(t,n)=>n.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${q.alternativeLabel}`]:{paddingRight:0}})),bt=I("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(t,n)=>n.labelContainer})(({theme:t})=>({width:"100%",color:(t.vars||t).palette.text.secondary,[`&.${q.alternativeLabel}`]:{textAlign:"center"}})),se=x.forwardRef(function(n,a){var d;const p=V({props:n,name:"MuiStepLabel"}),{children:s,className:b,componentsProps:o={},error:u=!1,icon:C,optional:g,slotProps:l={},StepIconComponent:S,StepIconProps:N}=p,j=J(p,ht),{alternativeLabel:R,orientation:E}=x.useContext(ee),{active:h,disabled:M,completed:L,icon:B}=x.useContext(re),F=C||B;let $=S;F&&!$&&($=ut);const P=m({},p,{active:h,alternativeLabel:R,completed:L,disabled:M,error:u,orientation:E}),A=xt(P),W=(d=l.label)!=null?d:o.label;return e.jsxs(ft,m({className:H(A.root,b),ref:a,ownerState:P},j,{children:[F||$?e.jsx(gt,{className:A.iconContainer,ownerState:P,children:e.jsx($,m({completed:L,active:h,error:u,icon:F},N))}):null,e.jsxs(bt,{className:A.labelContainer,ownerState:P,children:[s?e.jsx(vt,m({ownerState:P},W,{className:H(A.label,W==null?void 0:W.className),children:s})):null,g]})]}))});se.muiName="StepLabel";function jt(t){return G("MuiStepConnector",t)}_("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const yt=["className"],Ct=t=>{const{classes:n,orientation:a,alternativeLabel:d,active:p,completed:s,disabled:b}=t,o={root:["root",a,d&&"alternativeLabel",p&&"active",s&&"completed",b&&"disabled"],line:["line",`line${je(a)}`]};return X(o,jt,n)},St=I("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.orientation],a.alternativeLabel&&n.alternativeLabel,a.completed&&n.completed]}})(({ownerState:t})=>m({flex:"1 1 auto"},t.orientation==="vertical"&&{marginLeft:12},t.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),Lt=I("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.line,n[`line${je(a.orientation)}`]]}})(({ownerState:t,theme:n})=>{const a=n.palette.mode==="light"?n.palette.grey[400]:n.palette.grey[600];return m({display:"block",borderColor:n.vars?n.vars.palette.StepConnector.border:a},t.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},t.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),Nt=x.forwardRef(function(n,a){const d=V({props:n,name:"MuiStepConnector"}),{className:p}=d,s=J(d,yt),{alternativeLabel:b,orientation:o="horizontal"}=x.useContext(ee),{active:u,disabled:C,completed:g}=x.useContext(re),l=m({},d,{alternativeLabel:b,orientation:o,active:u,completed:g,disabled:C}),S=Ct(l);return e.jsx(St,m({className:H(S.root,p),ref:a,ownerState:l},s,{children:e.jsx(Lt,{className:S.line,ownerState:l})}))});function Rt(t){return G("MuiStepContent",t)}_("MuiStepContent",["root","last","transition"]);const Et=["children","className","TransitionComponent","transitionDuration","TransitionProps"],Pt=t=>{const{classes:n,last:a}=t;return X({root:["root",a&&"last"],transition:["transition"]},Rt,n)},wt=I("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,a.last&&n.last]}})(({ownerState:t,theme:n})=>m({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:n.vars?`1px solid ${n.vars.palette.StepContent.border}`:`1px solid ${n.palette.mode==="light"?n.palette.grey[400]:n.palette.grey[600]}`},t.last&&{borderLeft:"none"})),It=I(le,{name:"MuiStepContent",slot:"Transition",overridesResolver:(t,n)=>n.transition})({}),ve=x.forwardRef(function(n,a){const d=V({props:n,name:"MuiStepContent"}),{children:p,className:s,TransitionComponent:b=le,transitionDuration:o="auto",TransitionProps:u}=d,C=J(d,Et),{orientation:g}=x.useContext(ee),{active:l,last:S,expanded:N}=x.useContext(re),j=m({},d,{last:S}),R=Pt(j);let E=o;return o==="auto"&&!b.muiSupportAuto&&(E=void 0),e.jsx(wt,m({className:H(R.root,s),ref:a,ownerState:j},C,{children:e.jsx(It,m({as:b,in:l||N,className:R.transition,ownerState:j,timeout:E,unmountOnExit:!0},u,{children:p}))}))});function Mt(t){return G("MuiStepper",t)}_("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const $t=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],Ft=t=>{const{orientation:n,nonLinear:a,alternativeLabel:d,classes:p}=t;return X({root:["root",n,a&&"nonLinear",d&&"alternativeLabel"]},Mt,p)},Tt=I("div",{name:"MuiStepper",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:a}=t;return[n.root,n[a.orientation],a.alternativeLabel&&n.alternativeLabel,a.nonLinear&&n.nonLinear]}})(({ownerState:t})=>m({display:"flex"},t.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},t.orientation==="vertical"&&{flexDirection:"column"},t.alternativeLabel&&{alignItems:"flex-start"})),zt=e.jsx(Nt,{}),At=x.forwardRef(function(n,a){const d=V({props:n,name:"MuiStepper"}),{activeStep:p=0,alternativeLabel:s=!1,children:b,className:o,component:u="div",connector:C=zt,nonLinear:g=!1,orientation:l="horizontal"}=d,S=J(d,$t),N=m({},d,{nonLinear:g,alternativeLabel:s,orientation:l,component:u}),j=Ft(N),R=x.Children.toArray(b).filter(Boolean),E=R.map((M,L)=>x.cloneElement(M,m({index:L,last:L+1===R.length},M.props))),h=x.useMemo(()=>({activeStep:p,alternativeLabel:s,connector:C,nonLinear:g,orientation:l}),[p,s,C,g,l]);return e.jsx(ee.Provider,{value:h,children:e.jsx(Tt,m({as:u,ownerState:N,className:H(j.root,o),ref:a},S,{children:E}))})}),ge={firstName:"",lastName:"",suffix:"",email:"",phone:"",dateOfBirth:"",address:"",guardianName:"",guardianPhone:"",educationalAttainment:"",currentSchool:"",documents:{birthCertificate:null,proofOfResidency:null,guardianId:null,schoolRecords:null,immunizationRecords:null,medicalForm:null,applicationForm:null}},ie=[{id:"birthCertificate",title:"Birth Certificate",description:"To verify age and identity",required:!1,acceptedFormats:".pdf,.jpg,.jpeg,.png"},{id:"proofOfResidency",title:"Proof of Residency",description:"Utility bill, lease agreement, or similar document",required:!1,acceptedFormats:".pdf,.jpg,.jpeg,.png"},{id:"guardianId",title:"Parent/Guardian ID",description:"Valid government-issued ID of parent or guardian",required:!1,acceptedFormats:".pdf,.jpg,.jpeg,.png"},{id:"schoolRecords",title:"Previous School Records",description:"Report cards or transfer credentials (if transferring)",required:!1,acceptedFormats:".pdf,.doc,.docx"},{id:"immunizationRecords",title:"Immunization Records",description:"Complete vaccination/immunization history",required:!1,acceptedFormats:".pdf,.jpg,.jpeg,.png"},{id:"medicalForm",title:"Medical/Health Form",description:"Recent medical examination results",required:!1,acceptedFormats:".pdf"},{id:"applicationForm",title:"Completed Application Forms",description:"All enrollment forms must be filled out completely",required:!1,acceptedFormats:".pdf,.doc,.docx"}],Dt=["Elementary","Junior High School","Senior High School","Vocational/Technical","Some College","College Graduate","Post Graduate","Others"],er=()=>{var Y;const{user:t}=Te(),{requests:n,submitPreEnrollment:a,getStudentEnrollmentStatus:d}=ze(),{courses:p}=Ae();console.log("Current user:",t),console.log("All courses:",p),console.log("All requests:",n);const[s,b]=x.useState(null),[o,u]=x.useState(ge),[C,g]=x.useState(!1),[l,S]=x.useState({}),[N,j]=x.useState({open:!1,message:"",severity:"success"});x.useRef(null);const[R,E]=x.useState(0),h=r=>t!=null&&t.id?n.find(f=>f.studentId===t.id&&f.courseId===r&&f.status==="approved")?"approved":d(t.id,r):null;x.useMemo(()=>{if(!t)return[];const r=n.filter(i=>i.email===t.email&&i.studentId===t.id);return console.log("User requests:",r),r},[n,t]),x.useMemo(()=>{if(!t)return new Set;const r=new Set(n.filter(i=>i.studentId===t.id&&i.status==="approved").map(i=>i.courseId));return console.log("Enrolled course IDs:",Array.from(r)),r},[n,t]);const M=x.useMemo(()=>{if(!p||!t)return[];const r=p.filter(i=>{const f=h(i.id),T=i.status==="active"&&f!=="approved";return console.log(`Course ${i.title}:`,{status:f,isActive:i.status==="active",isAvailable:T}),T});return console.log("Filtered available courses:",r),r},[p,t,n,h]);x.useMemo(()=>{if(!p)return new Map;const r=new Map;return p.forEach(i=>{r.set(i.title,i.currentEnrollment)}),r},[p]);const L=()=>{E(r=>r+1)},B=()=>{E(r=>r-1)},F=r=>i=>{i.target.files&&i.target.files[0]&&u(f=>({...f,documents:{...f.documents,[r]:i.target.files[0]}}))},$=()=>{const r={};let i=!0;return ie.forEach(f=>{const T=o.documents[f.id];T&&!f.acceptedFormats.split(",").some(D=>T.name.toLowerCase().endsWith(D.toLowerCase().trim()))&&(r[f.id]=`Invalid file format. Accepted formats: ${f.acceptedFormats}`,i=!1)}),S(f=>({...f,...r})),i},P=()=>{const r={};let i=!0;return o.firstName||(r.firstName="First name is required",i=!1),o.lastName||(r.lastName="Last name is required",i=!1),o.email?/\S+@\S+\.\S+/.test(o.email)||(r.email="Invalid email format",i=!1):(r.email="Email is required",i=!1),o.phone||(r.phone="Phone number is required",i=!1),o.dateOfBirth||(r.dateOfBirth="Date of birth is required",i=!1),o.address||(r.address="Address is required",i=!1),o.guardianName||(r.guardianName="Guardian name is required",i=!1),o.guardianPhone||(r.guardianPhone="Guardian phone is required",i=!1),o.educationalAttainment||(r.educationalAttainment="Educational attainment is required",i=!1),o.educationalAttainment==="Others"&&!o.currentSchool&&(r.currentSchool="Please specify your current school or educational institution",i=!1),$()||(i=!1),S(r),i},A=r=>{const i=h(r.id),f=r.currentEnrollment;return i==="approved"?{disabled:!0,label:"Already Enrolled",tooltip:"You are currently enrolled in this course",color:"secondary",hide:!1}:f>=r.enrollmentLimit?{disabled:!0,label:"Course Full",tooltip:"This course has reached its maximum capacity",color:"error",hide:!1}:i==="pending"?{disabled:!0,label:"Pending Approval",tooltip:"Your enrollment request is being reviewed",color:"warning",hide:!1}:{disabled:!1,label:"Enroll",tooltip:i==="rejected"?"Your previous request was rejected. You can try again.":"Click to enroll in this course",color:"primary",hide:!1}},W=r=>{const i=h(r);if(i==="approved"){j({open:!0,message:"You are already enrolled in this course.",severity:"warning"});return}if(i==="pending"){j({open:!0,message:"Your enrollment request for this course is still pending.",severity:"warning"});return}if(b(r),t){const f=t.name?t.name.split(" "):["",""];u(T=>({...T,firstName:f[0]||"",lastName:f.slice(1).join(" ")||"",email:t.email||""}))}g(!0)},O=async()=>{if(!t||!s){j({open:!0,message:"Unable to submit enrollment. Please try again.",severity:"error"});return}if(P())try{const r=o.suffix?`${o.firstName} ${o.lastName}, ${o.suffix}`:`${o.firstName} ${o.lastName}`;await a({studentId:t.id,courseId:s,name:r,email:o.email,phone:o.phone,dateOfBirth:o.dateOfBirth,address:o.address,guardianName:o.guardianName,guardianPhone:o.guardianPhone,educationalAttainment:o.educationalAttainment==="Others"?`Others: ${o.currentSchool}`:o.educationalAttainment,document:o.documents[ie[R].id]||void 0}),j({open:!0,message:"Pre-enrollment request submitted successfully!",severity:"success"}),Z()}catch{j({open:!0,message:"Failed to submit pre-enrollment request. Please try again.",severity:"error"})}},Z=()=>{g(!1),u(ge)};return t?!p||p.length===0?e.jsxs(w,{sx:{p:3},children:[e.jsx(c,{variant:"h4",gutterBottom:!0,children:"Available Courses"}),e.jsx(c,{variant:"body1",color:"text.secondary",children:"No courses are available at this time."})]}):e.jsxs(w,{sx:{p:3},children:[e.jsx(c,{variant:"h4",gutterBottom:!0,children:"Available Courses"}),M.length===0?e.jsx(c,{variant:"body1",color:"text.secondary",children:"No available courses for enrollment at this time. You might be enrolled in all current courses."}):e.jsx(y,{container:!0,spacing:3,children:M.map(r=>{var f;const i=A(r);return e.jsx(y,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(De,{children:[e.jsx(We,{component:"img",height:"140",image:`https://source.unsplash.com/800x600/?${encodeURIComponent(r.title.toLowerCase().replace(/\s+/g,"-"))}`,alt:r.title}),e.jsxs(Be,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:r.title}),e.jsx(c,{variant:"body2",color:"text.secondary",paragraph:!0,children:r.description}),e.jsxs(w,{sx:{mt:2},children:[e.jsxs(w,{sx:{mb:2},children:[e.jsxs(c,{variant:"body2",color:"text.secondary",children:["Duration: ",r.duration," weeks"]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:["Enrollment: ",r.currentEnrollment,"/",r.enrollmentLimit]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:["Fee: $",r.fee]})]}),h(r.id)&&e.jsxs(w,{sx:{mb:2},children:[e.jsx(c,{variant:"subtitle2",gutterBottom:!0,children:"Your Enrollment Status:"}),e.jsx(ue,{label:(f=h(r.id))==null?void 0:f.toUpperCase(),color:h(r.id)==="approved"?"success":h(r.id)==="rejected"?"error":"warning",sx:{mr:1,fontWeight:h(r.id)==="approved"?"bold":"normal"}}),h(r.id)==="approved"&&e.jsx(c,{variant:"body2",color:"success.main",sx:{mt:1,fontWeight:"medium"},children:"You are currently enrolled and active in this course."}),h(r.id)==="rejected"&&e.jsx(c,{variant:"body2",color:"error.main",sx:{mt:1},children:"Your enrollment was not approved. You may apply again."}),h(r.id)==="pending"&&e.jsx(c,{variant:"body2",color:"warning.main",sx:{mt:1},children:"Your enrollment request is being reviewed."})]}),e.jsxs(w,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:[e.jsxs(w,{children:[e.jsxs(c,{variant:"body2",color:"text.secondary",children:["Schedule: ",r.schedule]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:["Instructor: ",r.instructor]})]}),e.jsx(w,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(ke,{title:i.tooltip,children:e.jsx("span",{children:e.jsx(Q,{variant:"contained",color:i.color,disabled:i.disabled,onClick:()=>W(r.id),children:i.label})})})})]})]})]})]})},r.id)})}),e.jsxs(Oe,{open:C,onClose:()=>g(!1),maxWidth:"md",fullWidth:!0,TransitionProps:{onEnter:()=>{if(s){const r=h(s);(r==="approved"||r==="pending")&&(j({open:!0,message:r==="approved"?"You are already enrolled in this course.":"Your enrollment request for this course is still pending.",severity:"warning"}),Z())}}},children:[e.jsxs(qe,{children:[e.jsx(c,{variant:"h6",children:"Student Pre-enrollment Form"}),e.jsx(c,{variant:"subtitle2",color:"text.secondary",children:(Y=p.find(r=>r.id===s))==null?void 0:Y.title})]}),e.jsx(Ue,{children:e.jsxs(At,{activeStep:R,orientation:"vertical",children:[e.jsxs(xe,{children:[e.jsx(se,{children:"Personal Information"}),e.jsx(ve,{children:e.jsxs(y,{container:!0,spacing:2,children:[e.jsx(y,{item:!0,xs:12,sm:4,children:e.jsx(k,{fullWidth:!0,label:"First Name",value:o.firstName,onChange:r=>u({...o,firstName:r.target.value}),error:!!l.firstName,helperText:l.firstName,required:!0,disabled:!s||h(s)==="approved"})}),e.jsx(y,{item:!0,xs:12,sm:4,children:e.jsx(k,{fullWidth:!0,label:"Last Name",value:o.lastName,onChange:r=>u({...o,lastName:r.target.value}),error:!!l.lastName,helperText:l.lastName,required:!0,disabled:!s||h(s)==="approved"})}),e.jsx(y,{item:!0,xs:12,sm:4,children:e.jsx(k,{fullWidth:!0,label:"Suffix (Optional)",value:o.suffix,onChange:r=>u({...o,suffix:r.target.value}),placeholder:"Jr., Sr., III, etc.",disabled:!s||h(s)==="approved"})}),e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsx(k,{fullWidth:!0,label:"Email",type:"email",value:o.email,onChange:r=>u({...o,email:r.target.value}),error:!!l.email,helperText:l.email,required:!0,disabled:!s||h(s)==="approved"})}),e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsx(k,{fullWidth:!0,label:"Phone",value:o.phone,onChange:r=>u({...o,phone:r.target.value}),error:!!l.phone,helperText:l.phone,required:!0,disabled:!s||h(s)==="approved"})}),e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsx(k,{fullWidth:!0,label:"Date of Birth",type:"date",value:o.dateOfBirth,onChange:r=>u({...o,dateOfBirth:r.target.value}),error:!!l.dateOfBirth,helperText:l.dateOfBirth,InputLabelProps:{shrink:!0},required:!0,disabled:!s||h(s)==="approved"})}),e.jsx(y,{item:!0,xs:12,children:e.jsx(k,{fullWidth:!0,label:"Address",value:o.address,onChange:r=>u({...o,address:r.target.value}),error:!!l.address,helperText:l.address,multiline:!0,rows:2,required:!0,disabled:!s||h(s)==="approved"})}),e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsx(k,{fullWidth:!0,label:"Guardian Name",value:o.guardianName,onChange:r=>u({...o,guardianName:r.target.value}),error:!!l.guardianName,helperText:l.guardianName,required:!0,disabled:!s||h(s)==="approved"})}),e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsx(k,{fullWidth:!0,label:"Guardian Phone",value:o.guardianPhone,onChange:r=>u({...o,guardianPhone:r.target.value}),error:!!l.guardianPhone,helperText:l.guardianPhone,required:!0,disabled:!s||h(s)==="approved"})}),e.jsx(y,{item:!0,xs:12,children:e.jsx(c,{variant:"h6",color:"primary",gutterBottom:!0,sx:{mt:3},children:"Educational Background"})}),e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsxs(He,{fullWidth:!0,required:!0,error:!!l.educationalAttainment,children:[e.jsx(Ye,{children:"Educational Attainment"}),e.jsxs(Ge,{value:o.educationalAttainment,onChange:r=>u({...o,educationalAttainment:r.target.value}),label:"Educational Attainment",disabled:!s||h(s)==="approved",children:[e.jsx(me,{value:"",children:e.jsx("em",{children:"Select level"})}),Dt.map(r=>e.jsx(me,{value:r,children:r},r))]}),l.educationalAttainment&&e.jsx(_e,{error:!0,children:l.educationalAttainment})]})}),o.educationalAttainment==="Others"&&e.jsx(y,{item:!0,xs:12,sm:6,children:e.jsx(k,{fullWidth:!0,label:"Specify School/Institution",value:o.currentSchool,onChange:r=>u({...o,currentSchool:r.target.value}),error:!!l.currentSchool,helperText:l.currentSchool,required:!0,disabled:!s||h(s)==="approved"})}),e.jsx(y,{item:!0,xs:12,children:e.jsx(he,{sx:{my:2}})}),e.jsx(y,{item:!0,xs:12,children:e.jsx(w,{sx:{mb:2},children:e.jsx(Q,{variant:"contained",onClick:L,sx:{mt:1,mr:1},children:"Continue"})})})]})})]}),e.jsxs(xe,{children:[e.jsx(se,{children:"Required Documents"}),e.jsxs(ve,{children:[e.jsxs(w,{sx:{mb:3},children:[e.jsx(c,{variant:"h6",color:"primary",gutterBottom:!0,children:"Document Requirements Overview"}),e.jsx(c,{variant:"body2",color:"text.secondary",paragraph:!0,children:"The following documents can be submitted as part of your enrollment application. All documents are optional but recommended for a complete application."}),e.jsxs(pe,{elevation:0,sx:{p:2,bgcolor:"background.default",border:1,borderColor:"divider"},children:[e.jsxs(y,{container:!0,spacing:2,children:[e.jsxs(y,{item:!0,xs:12,md:6,children:[e.jsx(c,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:"Personal Documents"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[e.jsx("li",{children:e.jsxs(c,{variant:"body2",children:["Birth Certificate",e.jsxs(c,{component:"span",variant:"caption",color:"text.secondary",children:[" ","(for age and identity verification)"]})]})}),e.jsx("li",{children:e.jsxs(c,{variant:"body2",children:["Proof of Residency",e.jsxs(c,{component:"span",variant:"caption",color:"text.secondary",children:[" ","(utility bill or lease agreement)"]})]})}),e.jsx("li",{children:e.jsxs(c,{variant:"body2",children:["Parent/Guardian ID",e.jsxs(c,{component:"span",variant:"caption",color:"text.secondary",children:[" ","(valid government-issued ID)"]})]})})]})]}),e.jsxs(y,{item:!0,xs:12,md:6,children:[e.jsx(c,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:"Educational & Health Records"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem"},children:[e.jsx("li",{children:e.jsxs(c,{variant:"body2",children:["Previous School Records",e.jsxs(c,{component:"span",variant:"caption",color:"text.secondary",children:[" ","(report cards or credentials)"]})]})}),e.jsx("li",{children:e.jsxs(c,{variant:"body2",children:["Immunization Records",e.jsxs(c,{component:"span",variant:"caption",color:"text.secondary",children:[" ","(vaccination history)"]})]})}),e.jsx("li",{children:e.jsxs(c,{variant:"body2",children:["Medical/Health Form",e.jsxs(c,{component:"span",variant:"caption",color:"text.secondary",children:[" ","(recent examination results)"]})]})}),e.jsx("li",{children:e.jsxs(c,{variant:"body2",children:["Application Forms",e.jsxs(c,{component:"span",variant:"caption",color:"text.secondary",children:[" ","(completed enrollment forms)"]})]})})]})]})]}),e.jsx(w,{sx:{mt:2},children:e.jsx(c,{variant:"caption",color:"text.secondary",children:"Accepted file formats: PDF, DOC, DOCX, JPG, PNG (specific formats may vary by document type)"})})]})]}),e.jsx(he,{sx:{my:3}}),e.jsx(c,{variant:"h6",color:"primary",gutterBottom:!0,children:"Document Upload"}),e.jsxs(y,{container:!0,spacing:2,children:[ie.map(r=>{var i,f,T;return e.jsx(y,{item:!0,xs:12,children:e.jsxs(pe,{elevation:0,sx:{p:2,bgcolor:"background.default",border:1,borderColor:(i=l.documents)!=null&&i[r.id]?"error.main":"divider"},children:[e.jsxs(w,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(c,{variant:"subtitle1",color:"primary",children:r.title}),e.jsx(ue,{label:"Optional",size:"small",color:"default",variant:"outlined"})]}),e.jsx(c,{variant:"body2",color:"text.secondary",sx:{mb:2},children:r.description}),e.jsx("input",{type:"file",id:`file-${r.id}`,style:{display:"none"},onChange:F(r.id),accept:r.acceptedFormats}),e.jsxs(w,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Q,{variant:"outlined",onClick:()=>{var D;return(D=document.getElementById(`file-${r.id}`))==null?void 0:D.click()},disabled:!s||h(s)==="approved",children:o.documents[r.id]?"Change File":"Upload File"}),o.documents[r.id]instanceof File&&e.jsxs(c,{variant:"body2",color:"text.secondary",children:["Selected: ",((f=o.documents[r.id])==null?void 0:f.name)||""]})]}),((T=l.documents)==null?void 0:T[r.id])&&e.jsx(c,{variant:"caption",color:"error",children:l.documents[r.id]})]})},r.id)}),e.jsx(y,{item:!0,xs:12,children:e.jsxs(w,{sx:{mb:2},children:[e.jsx(Q,{onClick:B,sx:{mt:1,mr:1},children:"Back"}),e.jsx(Q,{variant:"contained",onClick:O,sx:{mt:1,mr:1},children:"Submit Pre-enrollment"})]})})]})]})]})]})})]}),e.jsx(Ve,{open:N.open,autoHideDuration:3e3,onClose:()=>j({...N,open:!1}),anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(Je,{onClose:()=>j({...N,open:!1}),severity:N.severity,children:N.message})})]}):e.jsx(w,{sx:{p:3},children:e.jsx(c,{variant:"h6",color:"text.secondary",children:"Please log in to view available courses."})})};export{er as default};
