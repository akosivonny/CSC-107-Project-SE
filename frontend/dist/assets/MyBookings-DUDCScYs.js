import{F as B,a as D,R as d,j as e,B as o,T as i,P as b,H as u,b as x}from"./index-DbYJZ2L_.js";import{f as h}from"./formatters-Vh8rcKKL.js";import{a as C,b as v,c as S,d as n,T as t,e as y}from"./TableRow-CFf1-TFU.js";import{C as P}from"./Chip-CfcJRCOp.js";import{D as T,a as k}from"./DialogContent-B5Ew9i7T.js";import{D as w}from"./DialogTitle-BRTcPFtJ.js";import{D as z}from"./DialogActions-DhEqDZ3P.js";import"./useId-DB69X5YC.js";const N=()=>{const{getVisitorBookings:p}=B(),{user:l}=D(),[r,j]=d.useState(null),[m,a]=d.useState(!1),c=l?p(l.email):[],g=s=>{switch(s){case"approved":return"success";case"rejected":return"error";default:return"warning"}},f=s=>{j(s),a(!0)};return e.jsxs(o,{sx:{p:3},children:[e.jsx(i,{variant:"h4",gutterBottom:!0,children:"My Bookings"}),e.jsx(C,{component:b,children:e.jsxs(v,{children:[e.jsx(S,{children:e.jsxs(n,{children:[e.jsx(t,{children:"Visit Date"}),e.jsx(t,{children:"Group Size"}),e.jsx(t,{children:"Purpose"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Actions"})]})}),e.jsxs(y,{children:[c.map(s=>e.jsxs(n,{children:[e.jsx(t,{children:u(new Date(s.visitDate),"PPP p")}),e.jsx(t,{children:s.groupSize}),e.jsx(t,{children:h(s.purpose)}),e.jsx(t,{children:e.jsx(P,{label:s.status.toUpperCase(),color:g(s.status),size:"small"})}),e.jsx(t,{children:e.jsx(x,{variant:"outlined",size:"small",onClick:()=>f(s),children:"View Details"})})]},s.id)),c.length===0&&e.jsx(n,{children:e.jsx(t,{colSpan:5,align:"center",children:"No bookings found"})})]})]})}),e.jsxs(T,{open:m,onClose:()=>a(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(w,{children:"Booking Details"}),e.jsx(k,{children:r&&e.jsxs(o,{sx:{mt:2},children:[e.jsxs(i,{variant:"subtitle1",gutterBottom:!0,children:["Visit Date: ",u(new Date(r.visitDate),"PPP p")]}),e.jsxs(i,{variant:"body1",gutterBottom:!0,children:["Group Size: ",r.groupSize," people"]}),e.jsxs(i,{variant:"body1",gutterBottom:!0,children:["Purpose: ",h(r.purpose)]}),e.jsxs(i,{variant:"body1",gutterBottom:!0,children:["Special Requirements: ",r.specialRequirements||"None"]}),e.jsxs(o,{sx:{mt:2},children:[e.jsxs(i,{variant:"subtitle2",color:"text.secondary",children:["Status: ",r.status.toUpperCase()]}),r.adminFeedback&&e.jsxs(e.Fragment,{children:[e.jsx(i,{variant:"subtitle2",color:"text.secondary",sx:{mt:1},children:"Admin Feedback:"}),e.jsx(i,{variant:"body2",sx:{mt:.5},children:r.adminFeedback})]})]})]})}),e.jsx(z,{children:e.jsx(x,{onClick:()=>a(!1),children:"Close"})})]})]})};export{N as default};
