import{r as f,g as rr,d as tr,h as or,_ as sr,l as v,p as w,m as _,j as t,s as U,n as d,o as er,q as br,t as jr,c as yr,v as Or,w as Cr,T as p,P as J,B as z,x as K,y as Q,R as X,z as C,A as R,b as Rr}from"./index-DbYJZ2L_.js";import{C as Pr}from"./Container-5Cw929jC.js";import{G as h}from"./Grid-CxKDHTfu.js";import{C as P,a as $}from"./CardContent-CpCCbOUe.js";import{A as $r}from"./Avatar-EWKlDmBl.js";import{D as Y}from"./Divider-BoJ66J-_.js";import"./useThemeProps-Dgt7qYpP.js";import"./useSlot-CZ1YRTh5.js";import"./dividerClasses-DklEsgBA.js";const nr=o=>{const s=f.useRef({});return f.useEffect(()=>{s.current=o}),s.current};function Ir(o){const{badgeContent:s,invisible:r=!1,max:n=99,showZero:a=!1}=o,g=nr({badgeContent:s,max:n});let l=r;r===!1&&s===0&&!a&&(l=!0);const{badgeContent:i,max:c=n}=l?g:o,m=i&&Number(i)>c?`${c}+`:i;return{badgeContent:i,invisible:l,max:c,displayValue:m}}function Br(o){return tr("MuiBadge",o)}const u=rr("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Lr=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],T=10,S=4,Nr=o=>{const{color:s,anchorOrigin:r,invisible:n,overlap:a,variant:g,classes:l={}}=o,i={root:["root"],badge:["badge",g,n&&"invisible",`anchorOrigin${d(r.vertical)}${d(r.horizontal)}`,`anchorOrigin${d(r.vertical)}${d(r.horizontal)}${d(a)}`,`overlap${d(a)}`,s!=="default"&&`color${d(s)}`]};return er(i,Br,l)},Ar=U("span",{name:"MuiBadge",slot:"Root",overridesResolver:(o,s)=>s.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),zr=U("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(o,s)=>{const{ownerState:r}=o;return[s.badge,s[r.variant],s[`anchorOrigin${d(r.anchorOrigin.vertical)}${d(r.anchorOrigin.horizontal)}${d(r.overlap)}`],r.color!=="default"&&s[`color${d(r.color)}`],r.invisible&&s.invisible]}})(({theme:o})=>{var s;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:o.typography.fontFamily,fontWeight:o.typography.fontWeightMedium,fontSize:o.typography.pxToRem(12),minWidth:T*2,lineHeight:1,padding:"0 6px",height:T*2,borderRadius:T,zIndex:1,transition:o.transitions.create("transform",{easing:o.transitions.easing.easeInOut,duration:o.transitions.duration.enteringScreen}),variants:[...Object.keys(((s=o.vars)!=null?s:o).palette).filter(r=>{var n,a;return((n=o.vars)!=null?n:o).palette[r].main&&((a=o.vars)!=null?a:o).palette[r].contrastText}).map(r=>({props:{color:r},style:{backgroundColor:(o.vars||o).palette[r].main,color:(o.vars||o).palette[r].contrastText}})),{props:{variant:"dot"},style:{borderRadius:S,height:S*2,minWidth:S*2,padding:0}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${u.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${u.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${u.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${u.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${u.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${u.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${u.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${u.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:o.transitions.create("transform",{easing:o.transitions.easing.easeInOut,duration:o.transitions.duration.leavingScreen})}}]}}),Tr=f.forwardRef(function(s,r){var n,a,g,l,i,c;const m=or({props:s,name:"MuiBadge"}),{anchorOrigin:b={vertical:"top",horizontal:"right"},className:x,component:I,components:j={},componentsProps:e={},children:ar,overlap:D="rectangular",color:F="default",invisible:ir=!1,max:lr=99,badgeContent:M,slots:y,slotProps:O,showZero:k=!1,variant:B="standard"}=m,cr=sr(m,Lr),{badgeContent:W,invisible:dr,max:gr,displayValue:pr}=Ir({max:lr,invisible:ir,badgeContent:M,showZero:k}),mr=nr({anchorOrigin:b,color:F,overlap:D,variant:B,badgeContent:M}),V=dr||W==null&&B!=="dot",{color:hr=F,overlap:ur=D,anchorOrigin:vr=b,variant:E=B}=V?mr:m,H=E!=="dot"?pr:void 0,L=v({},m,{badgeContent:W,invisible:V,max:gr,displayValue:H,showZero:k,anchorOrigin:vr,color:hr,overlap:ur,variant:E}),Z=Nr(L),G=(n=(a=y==null?void 0:y.root)!=null?a:j.Root)!=null?n:Ar,q=(g=(l=y==null?void 0:y.badge)!=null?l:j.Badge)!=null?g:zr,N=(i=O==null?void 0:O.root)!=null?i:e.root,A=(c=O==null?void 0:O.badge)!=null?c:e.badge,xr=w({elementType:G,externalSlotProps:N,externalForwardedProps:cr,additionalProps:{ref:r,as:I},ownerState:L,className:_(N==null?void 0:N.className,Z.root,x)}),fr=w({elementType:q,externalSlotProps:A,ownerState:L,className:_(Z.badge,A==null?void 0:A.className)});return t.jsxs(G,v({},xr,{children:[ar,t.jsx(q,v({},fr,{children:H}))]}))});function Sr(o){return tr("MuiListItemAvatar",o)}rr("MuiListItemAvatar",["root","alignItemsFlexStart"]);const _r=["className"],Ur=o=>{const{alignItems:s,classes:r}=o;return er({root:["root",s==="flex-start"&&"alignItemsFlexStart"]},Sr,r)},Dr=U("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:r}=o;return[s.root,r.alignItems==="flex-start"&&s.alignItemsFlexStart]}})(({ownerState:o})=>v({minWidth:56,flexShrink:0},o.alignItems==="flex-start"&&{marginTop:8})),Fr=f.forwardRef(function(s,r){const n=or({props:s,name:"MuiListItemAvatar"}),{className:a}=n,g=sr(n,_r),l=f.useContext(br),i=v({},n,{alignItems:l.alignItems}),c=Ur(i);return t.jsx(Dr,v({className:_(c.root,a),ownerState:i,ref:r},g))}),Mr=jr(t.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),Jr=()=>{const{users:o,getUsersByRole:s,getRecentUsers:r,getTotalUsers:n}=yr(),{notifications:a,markAsRead:g,clearFailedNotifications:l}=Or(),{courses:i}=Cr(),c=r(7),m=s("student").length,b=s("visitor").length,x=a.filter(e=>e.userId==="admin"&&!e.read),I=e=>{g(e)},j=()=>{l()};return t.jsxs(Pr,{maxWidth:"lg",sx:{mt:4,mb:4},children:[t.jsxs(h,{container:!0,spacing:3,mb:4,children:[t.jsx(h,{item:!0,xs:12,sm:6,md:3,children:t.jsx(P,{children:t.jsxs($,{children:[t.jsx(p,{color:"textSecondary",gutterBottom:!0,children:"Total Users"}),t.jsx(p,{variant:"h4",children:n()})]})})}),t.jsx(h,{item:!0,xs:12,sm:6,md:3,children:t.jsx(P,{children:t.jsxs($,{children:[t.jsx(p,{color:"textSecondary",gutterBottom:!0,children:"Students"}),t.jsx(p,{variant:"h4",children:m})]})})}),t.jsx(h,{item:!0,xs:12,sm:6,md:3,children:t.jsx(P,{children:t.jsxs($,{children:[t.jsx(p,{color:"textSecondary",gutterBottom:!0,children:"Visitors"}),t.jsx(p,{variant:"h4",children:b})]})})}),t.jsx(h,{item:!0,xs:12,sm:6,md:3,children:t.jsx(P,{children:t.jsxs($,{children:[t.jsx(p,{color:"textSecondary",gutterBottom:!0,children:"Active Courses"}),t.jsx(p,{variant:"h4",children:i.filter(e=>e.status==="active").length})]})})})]}),t.jsxs(h,{container:!0,spacing:3,children:[t.jsx(h,{item:!0,xs:12,md:6,children:t.jsxs(J,{sx:{p:2,height:"100%"},children:[t.jsxs(z,{display:"flex",alignItems:"center",mb:2,children:[t.jsx(K,{sx:{mr:1}}),t.jsx(p,{variant:"h6",children:"Recent Registrations"})]}),t.jsxs(Q,{children:[c.map(e=>t.jsxs(X.Fragment,{children:[t.jsxs(C,{children:[t.jsx(Fr,{children:t.jsx($r,{children:t.jsx(K,{})})}),t.jsx(R,{primary:e.name,secondary:`${e.email} - ${e.role.charAt(0).toUpperCase()+e.role.slice(1)} - Joined: ${new Date(e.joinDate).toLocaleDateString()}`})]}),t.jsx(Y,{variant:"inset",component:"li"})]},e.id)),c.length===0&&t.jsx(C,{children:t.jsx(R,{primary:"No recent registrations"})})]})]})}),t.jsx(h,{item:!0,xs:12,md:6,children:t.jsxs(J,{sx:{p:2,height:"100%"},children:[t.jsxs(z,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[t.jsxs(z,{display:"flex",alignItems:"center",children:[t.jsx(Tr,{badgeContent:x.length,color:"error",sx:{mr:1},children:t.jsx(Mr,{})}),t.jsx(p,{variant:"h6",children:"System Notifications"})]}),t.jsx(Rr,{variant:"outlined",color:"error",size:"small",onClick:j,children:"Clear Failed"})]}),t.jsxs(Q,{children:[x.map(e=>t.jsxs(X.Fragment,{children:[t.jsx(C,{button:!0,onClick:()=>I(e.id),children:t.jsx(R,{primary:e.title,secondary:`${e.message} - ${new Date(e.createdAt).toLocaleString()}`})}),t.jsx(Y,{component:"li"})]},e.id)),x.length===0&&t.jsx(C,{children:t.jsx(R,{primary:"No new notifications"})})]})]})})]})]})};export{Jr as default};
